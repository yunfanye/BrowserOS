# Nxtscape Release Build Configuration
build:
  type: release
  # architecture: arm64  # Default single architecture
  architectures: [x86_64, arm64] # List for multi-architecture builds
  universal: true # Create universal binary from multiple architectures

chromium:
  version_file: build/config/versions/chromium_version.txt

nxtscape:
  version_file: build/config/versions/nxtscape_version.txt

gn_flags:
  file: build/config/gn/flags.macos.release.gn

steps:
  clean: true
  git_setup: true
  apply_patches: true
  build: true
  sign: true
  package: true

paths:
  root_dir: .
  chromium_src: build/src

# Environment-specific settings
env:
  PYTHONPATH: scripts

# Release-specific settings
release:
  create_dmg: true
  dmg_name_format: "Nxtscape_{chromium_version}-.{nxtscape_version}.dmg"

# Signing configuration (requires environment variables)
signing:
  require_env_vars:
    - MACOS_CERTIFICATE_NAME
    - PROD_MACOS_NOTARIZATION_APPLE_ID
    - PROD_MACOS_NOTARIZATION_TEAM_ID
    - PROD_MACOS_NOTARIZATION_PWD

# Notification settings
notifications:
  slack: true # Enable Slack notifications for release builds

